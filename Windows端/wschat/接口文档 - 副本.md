# 接口文档

## 基本信息
- **API版本**：1.0.0
- **开发团队**：[团队名称]
- **联系方式**：[联系邮箱或链接]
- **文档版本**：1.0.0

## 用户服务接口列表

### 通过手机号注册用户
- **请求URL**: `/user/register`
- **请求方式**: `POST`
- **请求参数**:
  - `username`: 用户名，长度5-32位
  - `password`: 密码，长度5-16位
  - `rePassword`: 重复密码
  - `phone`: 手机号，格式为3-4位区号后跟7-8位电话号码
  - `code`: 短信验证码
- **响应**:
  - **成功**: `Result`对象，包含token信息
  - **失败**: `Result`对象，包含错误信息

### 用户登录（用户名或邮箱）
- **请求URL**: `/user/login`
- **请求方式**: `GET`
- **请求参数**:
  - `username`: 用户名或邮箱，长度5-32位
  - `password`: 密码，长度5-16位
- **响应**:
  - **成功**: `Result`对象，包含token信息
  - **失败**: `Result`对象，包含错误信息

### 通过手机号登录用户
- **请求URL**: `/user/loginByPhone`
- **请求方式**: `GET`
- **请求参数**:
  - `phone`: 手机号
  - `code`: 短信验证码
- **响应**:
  - **成功**: `Result`对象，包含token信息
  - **失败**: `Result`对象，包含错误信息

### 用户搜索
- **请求URL**: `/user/searchUser`
- **请求方式**: `GET`
- **请求参数**:
  - `msg`: 搜索关键词，可以是用户名或手机号
- **响应**:
  - **成功**: `Result`对象，包含匹配的用户列表信息
  - **失败**: `Result`对象，包含错误信息

### 获取好友列表
- **请求URL**: `/user/getFriendsList`
- **请求方式**: `GET`
- **请求参数**:
  - `userName`: 用户名
- **响应**:
  - **成功**: `Result`对象，包含好友列表信息
  - **失败**: `Result`对象，包含错误信息

### 获取用户信息
- **请求URL**: `/user/userInfo`
- **请求方式**: `GET`
- **响应**:
  - **成功**: `Result`对象，包含用户信息数据
  - **失败**: `Result`对象，包含错误信息

### 更新用户信息
- **请求URL**: `/user/update`
- **请求方式**: `PUT`
- **请求体**: 用户信息对象
- **响应**:
  - **成功**: `Result`对象，包含更新后的用户信息数据
  - **失败**: `Result`对象，包含错误信息

### 更新用户头像
- **请求URL**: `/user/updateAvatar`
- **请求方式**: `PATCH`
- **请求参数**:
  - `avatarUrl`: 头像URL
- **响应**:
  - **成功**: `Result`对象，提示操作成功
  - **失败**: `Result`对象，包含错误信息

### 更新用户密码
- **请求URL**: `/user/updatePwd`
- **请求方式**: `PATCH`
- **请求头**:
  - `Authorization`: 用户的token
- **请求体**: 包含`old_pwd`（原密码）、`new_pwd`（新密码）和`re_pwd`（重复新密码）的Map对象
- **响应**:
  - **成功**: `Result`对象，提示操作成功
  - **失败**: `Result`对象，包含错误信息

### 发送短信验证码
- **请求URL**: `/user/code`
- **请求方式**: `POST`
- **请求参数**:
  - `phone`: 手机号
- **响应**:
  - **成功**: `Result`对象，提示操作成功
  - **失败**: `Result`对象，包含错误信息

### 发送邮箱验证码
- **请求URL**: `/user/codeByMail`
- **请求方式**: `GET`
- **请求参数**:
  - `mail`: 邮箱地址
- **响应**:
  - **成功**: `Result`对象，提示操作成功
  - **失败**: `Result`对象，包含错误信息

### 通过邮箱注册用户
- **请求URL**: `/user/registerByMail`
- **请求方式**: `POST`
- **请求参数**:
  - `userName`: 用户名，长度5-32位
  - `password`: 密码，长度5-16位
  - `rePassword`: 重复密码
  - `email`: 邮箱地址
  - `code`: 邮箱验证码
- **响应**:
  - **成功**: `Result`对象，包含token信息
  - **失败**: `Result`对象，包含错误信息



## 群组服务接口列表

### 获取用户群组列表
- **请求URL**: `/groups/getGroupsList`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 用户ID
- **响应**:
  - **成功**: 返回`Result`对象，包含用户所属的群组列表
  - **失败**: 返回`Result`对象，包含错误信息

### 创建群组
- **请求URL**: `/groups/createGroups`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 创建群组的用户ID
  - `groupName`: 群组名称
- **响应**:
  - **成功**: 返回`Result`对象，包含新创建的群组信息
  - **失败**: 返回`Result`对象，包含错误信息

### 删除群组
- **请求URL**: `/groups/deleteGroups`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 执行删除操作的用户ID
  - `groupId`: 要删除的群组ID
- **响应**:
  - **成功**: 返回`Result`对象，提示操作成功
  - **失败**: 返回`Result`对象，包含错误信息，如无权限删除

### 添加用户到群组
- **请求URL**: `/groups/addGroups`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 要添加到群组的用户ID
  - `groupId`: 目标群组ID
- **响应**:
  - **成功**: 返回`Result`对象，提示操作成功
  - **失败**: 返回`Result`对象，包含错误信息，如用户已在群组中

### 同意添加用户到群组
- **请求URL**: `/groups/agreeAddGroups`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 被添加的用户ID
  - `groupId`: 群组ID
  - `groupOwner`: 群组所有者ID
- **响应**:
  - **成功**: 返回`Result`对象，提示操作成功
  - **失败**: 返回`Result`对象，包含错误信息，如用户请求异常或无权限

### 从群组中删除用户
- **请求URL**: `/groups/deleteGroupsUser`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 要删除的用户ID
  - `groupId`: 群组ID
  - `groupOwner`: 群组所有者ID
- **响应**:
  - **成功**: 返回`Result`对象，提示删除成功
  - **失败**: 返回`Result`对象，包含错误信息，如无权限删除

### 获取群组成员列表
- **请求URL**: `/groups/getGroupsUserList`
- **请求方式**: `GET`
- **请求参数**:
  - `groupId`: 群组ID
- **响应**:
  - **成功**: 返回`Result`对象，包含群组成员列表
  - **失败**: 返回`Result`对象，包含错误信息

### 获取群组申请列表
- **请求URL**: `/groups/getGroupsApplyingList`
- **请求方式**: `GET`
- **请求参数**:
  - `groupId`: 群组ID
- **响应**:
  - **成功**: 返回`Result`对象，包含群组申请列表
  - **失败**: 返回`Result`对象，包含错误信息

### 搜索群组
- **请求URL**: `/groups/searchGroups`
- **请求方式**: `GET`
- **请求参数**:
  - `groupName`: 群组名称
  - `groupId`: 群组ID（可选，用于区分搜索结果中的当前群组）
- **响应**:
  - **成功**: 返回`Result`对象，包含匹配的群组列表
  - **失败**: 返回`Result`对象，包含错误信息







## 好友服务接口列表

### 添加好友请求
- **请求URL**: `/friend/addFriend`
- **请求方式**: `GET`
- **请求参数**:
  - `userId1`: 发起添加好友请求的用户ID
  - `userId2`: 被添加为好友的用户ID
- **响应**:
  - **成功**: 返回`Result`对象，提示操作成功
  - **失败**: 返回`Result`对象，包含错误信息，如用户不存在

### 同意好友请求
- **请求URL**: `/friend/agreeFriend`
- **请求方式**: `GET`
- **请求参数**:
  - `userId1`: 发起添加好友请求的用户ID
  - `userId2`: 同意添加好友的用户ID
- **响应**:
  - **成功**: 返回`Result`对象，提示操作成功
  - **失败**: 返回`Result`对象，包含错误信息

### 拒绝好友请求
- **请求URL**: `/friend/disagreeFriend`
- **请求方式**: `GET`
- **请求参数**:
  - `userId1`: 发起添加好友请求的用户ID
  - `userId2`: 拒绝添加好友的用户ID
- **响应**:
  - **成功**: 返回`Result`对象，提示操作成功
  - **失败**: 返回`Result`对象，包含错误信息



## 聊天服务接口列表

### 获取所有私人消息
- **请求URL**: `/chat/getAllPrivateMessage`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 用户ID
- **响应**:
  - **成功**: 返回`Result`对象，包含所有未读的私人消息列表
  - **失败**: 返回`Result`对象，包含错误信息

### 获取私人消息
- **请求URL**: `/chat/getPrivateMessage`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 当前用户ID
  - `sendUserId`: 发送消息的用户ID
- **响应**:
  - **成功**: 返回`Result`对象，包含私人消息列表
  - **失败**: 返回`Result`对象，包含错误信息

### 获取群组消息
- **请求URL**: `/chat/getGroupsMessage`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 用户ID
  - `groupId`: 群组ID
- **响应**:
  - **成功**: 返回`Result`对象，包含群组消息列表
  - **失败**: 返回`Result`对象，包含错误信息，如用户不在该群组中

### 发送私人消息
- **请求URL**: `/chat/sendPrivateMessage`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 发送者用户ID
  - `toUserId`: 接收者用户ID
  - `msg`: 消息内容
- **响应**:
  - **成功**: 返回`Result`对象，提示操作成功
  - **失败**: 返回`Result`对象，包含错误信息，如发送异常

### 发送群组消息
- **请求URL**: `/chat/sendGroupsMessage`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 发送者用户ID
  - `toGroupId`: 目标群组ID
  - `msg`: 消息内容
- **响应**:
  - **成功**: 返回`Result`对象，提示操作成功
  - **失败**: 返回`Result`对象，包含错误信息

### 搜索私人消息
- **请求URL**: `/chat/searchPrivateMessage`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 用户ID
  - `toUserId`: 对方用户ID
  - `nums`: 需要返回的消息数量
- **响应**:
  - **成功**: 返回`Result`对象，包含搜索到的私人消息列表
  - **失败**: 返回`Result`对象，包含错误信息

### 搜索群组消息
- **请求URL**: `/chat/searchGroupsMessage`
- **请求方式**: `GET`
- **请求参数**:
  - `userId`: 用户ID
  - `groupId`: 群组ID
  - `nums`: 需要返回的消息数量
- **响应**:
  - **成功**: 返回`Result`对象，包含搜索到的群组消息列表
  - **失败**: 返回`Result`对象，包含错误信息





- 



## 数据模型说明

### Result<T>

- `code`: 业务状态码，0表示成功，1表示失败
- `message`: 提示信息
- `data`: 响应数据，成功时返回，失败时为null

### Users
- `userId`
- `userName`
- `nickName`
- `phone`
- `email`
- `passwordHash`
- `createdTime`
- `updatedTime`
- `avatarUrl`

### PrivateMessages
- `messageId`
- `senderId`
- `receiverId`
- `messageText`
- `messageTime`
- `messageType`
- `messageStatus`

### GroupMessages
- `messageId`
- `senderId`
- `groupId`
- `messageText`
- `messageTime`
- `messageType`

### Friends
- `friendId`
- `userId1`
- `userId2`
- `messageNum`
- `status`

### Groups
- `groupId`
- `groupName`
- `groupOwner`

### UserGroups
- `userGroupsId`
- `userId`
- `groupId`
- `messageNum`
- `status`

## 安全说明
- 所有请求需要通过HTTPS协议
- 使用SHA-256算法对密码进行加密
- 使用Redis缓存验证码和用户登录令牌

## 版本更新日志
- **1.0.0**: 初始版本发布

## 附录
- **示例代码**: 提供请求和响应的代码示例
- **术语表**: 解释文档中使用的专业术语